<div id="door">Door</div>
<div id="recorder">Recorder</div>

<script type="module">

import { Prohibition } from './prohibition.js'

let doorElem = document.getElementById('door');
let recorderElem = document.getElementById('recorder');

let recorder = Prohibition.getRecorder(recorderElem);
let door = Prohibition.getGuard(doorElem);

function playKnock() {
    console.log('knock')
}

recorder.listen('knock', playKnock)

recorder.listen('recordDone', (knock) => {
    door.start()
    door.listen('knock', playKnock)
    door.listen('guardDone', (result) => {
        console.log('passed', door.test(recorder.getKnock()))
    })
});

recorder.start()

</script>
